<div fxLayout="row">
    <tree-root [nodes]="nodes"
               [options]="options"
               class="kimios-browse-tree"
               (focus)="onFocusNode($event)"
               (toggleExpanded)="onToggleExpanded($event)"
               (click)="selectNode($event)" >

    </tree-root>
    <div>
        <mat-table
                *ngIf="dataSource != null"
                [dataSource]="dataSource"
                   matSort
                   matSortActive="{{sort.name}}"
                   matSortDirection="{{sort.direction}}"
                   matSortDisableClear
                   (matSortChange)="sortData($event)">

            <!-- remove Column -->
            <ng-container matColumnDef="remove">
                <mat-header-cell *matHeaderCellDef>
                    <mat-icon [ngClass]="'cursor-pointer'"
                              (click)="endAllSessions(adminService.selectedUser$.getValue())" >remove</mat-icon>
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    <mat-icon [ngClass]="'cursor-pointer'" (click)="endSession(row)" >remove</mat-icon>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="checkbox">
                <mat-header-cell *matHeaderCellDef>

                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    <mat-checkbox [formControlName]="row.uid"></mat-checkbox>
                </mat-cell>
            </ng-container>

            <ng-container
                    *ngFor="let col of columnsDescription"
                    matColumnDef="{{col.matColumnDef}}"
                    sticky="{{col.sticky}}">
                <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header="{{col.matColumnDef}}"
                > {{col.displayName}} </mat-header-cell>
                <mat-cell *matCellDef="let element" [class.cursor-pointer]="true">
                    <span *ngIf="col.id === 'sessionUid' && element.sessionUid === sessionService.sessionToken else notCurrentSession;">
                        Current session
                    </span>
                    <ng-template #notCurrentSession>
                        <span *ngIf="col.id != 'icon'">{{ col.cell ? col.cell(element) : element[col.matColumnDef]}}</span>
                    </ng-template>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>

            <mat-row *matRowDef="let row; columns: displayedColumns;" >
            </mat-row>

        </mat-table>
    </div>
</div>

