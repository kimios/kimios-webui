<ng-container *ngIf="authenticationSource$ | async as authenticationSource">
  <ng-container *ngIf="formGroupCreated$ | async as formGroupCreated">
    <ng-container *ngIf="formGroupCreated === true">

  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">

    <div fxLayout="row" fxLayoutGap="5px">
      <div fxLayout="column" [ngClass]="'domain-form-div'">
        <div [ngClass]="'talign-right'">Domain name: </div>
        <div [ngClass]="'talign-right'">Type: </div>
        <div [ngClass]="'talign-right'">Enable Auth By Email: </div>
        <div [ngClass]="'talign-right'">Enable SSO: </div>
      </div>
      <div fxLayout="column" fxFlex [ngClass]="'domain-form-div'">
        <div>{{authenticationSource$.getValue().name}}</div>
        <div>
          <mat-select
                  [(value)]="authenticationSource.className"
                  [formControlName]="'className'"
          >
            <mat-option
                    *ngFor="let type of availableTypes$ | async"
                    value="{{type}}"
            >
              {{type}}
            </mat-option>
          </mat-select>
        </div>
        <div>
          <mat-checkbox
                  value="{{authenticationSource.enableMailCheck}}"
                  name="enableMailCheck"
                  [formControlName]="'enableMailCheck'"
          >
          </mat-checkbox>
        </div>
        <div>
          <mat-checkbox
                  value="{{authenticationSource.enableSso}}"
                  name="enableSso"
                  [formControlName]="'enableSso'"
          >
          </mat-checkbox>
        </div>
      </div>
    </div>
    <!-- domain specific parameters -->
    <!--<ng-container *ngIf="authenticationSourceParams$ | async as params">-->
    <ng-container *ngIf="getParamsControlAsMap().size > 0">
      <!--<ng-container *ngIf="params.size > 0">-->
      <div fxLayout="column" [formGroup]="formGroup.get('params')" >
        <div [ngClass]="'domain-form-div'">
          <div>Specific parameters</div>
        </div>
        <div>
          <table>
            <tr *ngFor="let key of getParamsControlAsMap().keys()">
              <td>{{key}}</td>
              <td>
                <mat-form-field>
                  <input
                          matInput
                          [formControl]="formGroup.get('params').get(key)"
                          type="text">
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <!--</ng-container>-->
    </ng-container>

    <div style="width: 100%;">
      <div fxLayout="row"
           fxLayoutAlign="center center"
           fxLayoutGap="20px"
           fxFill
           style="margin-top: 20px !important;">
        <div [class.kimios-button]="true"
             [class.kimios-green]="true"
             [class.inactive]="true"
             fxLayout="row"
             fxLayoutAlign="center center"
             (click)="cancel()">
          <span [class.kimios-button-text]="true">CANCEL</span>
        </div>
        <div [class.kimios-button]="true"
             [class.kimios-green]="true"
             [class.active]="true"
             fxLayout="row"
             fxLayoutAlign="center center"
             (click)="onSubmit()">
          <span class="kimios-button-text">SAVE</span>
        </div>
      </div>
    </div>
  </form>

    </ng-container>
  </ng-container>
</ng-container>
